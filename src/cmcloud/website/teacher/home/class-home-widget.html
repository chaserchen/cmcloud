<div id="class-home-widget" data-on-student-ids="{{ roll_call.on_student_ids }}" data-off-student-ids="{{ roll_call.off_student_ids }}"
     data-leave-student-ids="{{ roll_call.leave_student_ids }}">
    <div class="row" style="margin-left: 0">
        <div class="span4">
            <div class="well">
                <p>考勤时间：{{ roll_call.created_at |datetime }}</p>
                <canvas id="myChart" width="400" height="400"></canvas>
            </div>
        </div>
        <div class="span4">
            <div class="well">
                <p>近一个月旷课率排行榜</p>
            </div>
        </div>
    </div>
</div>
<script src="{{ static_url('chart/Chart.bundle.min.js') }}"></script>
<script src="{{ static_url('chart/Chart.min.js') }}"></script>
<script>
    $(document).ready(function () {
        var ctx = document.getElementById("myChart");
        var widget = $('#class-home-widget');
        var myChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: [
                    "到课",
                    "旷课",
                    "请假"
                ],
                datasets: [
                    {
                        data: [widget.data('onStudentIds').length, widget.data('offStudentIds').length, widget.data('leaveStudentIds').length],
                        backgroundColor: [
                            "#36A2EB",
                            "#FF6384",
                            "#FFCE56"
                        ],
                        hoverBackgroundColor: [
                            "#36A2EB",
                            "#FF6384",
                            "#FFCE56"
                        ]
                    }]
            }
        });
    });
</script>